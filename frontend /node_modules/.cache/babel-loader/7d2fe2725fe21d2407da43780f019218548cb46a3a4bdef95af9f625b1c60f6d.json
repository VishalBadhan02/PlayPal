{"ast":null,"code":"import axios from\"axios\";import{useEffect,useState}from\"react\";import toast from\"react-hot-toast\";import ChatBox from\"./chatbox\";import{Link,Navigate}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const FriendList=()=>{const[list,setList]=useState([]);const[chat,setchat]=useState(false);const token=localStorage.getItem('token');useEffect(()=>{setFriends();},[]);const setFriends=async()=>{try{axios.defaults.headers.common[\"Authorization\"]=token;const res=await axios.get(\"http://127.0.0.1:5050/user/yourFriends\");setList([...res.data.friends,...res.data.friend]);}catch(err){toast.error(\"error in yourFriends\",err);}};const hnadleCancel=async user_id=>{try{const res=await axios.delete(\"http://127.0.0.1:5050/user/deleteRequest\",{data:{user_id}});}catch(err){toast.error(err.response.data.message);}};const handelchat=friendId=>{setchat(friendId);};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-center px-2 gap-2 \",style:{height:500},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-4 p-3 py-1 border rounded-2 border-warning\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row-sm d-flex py-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-6 text-center p-2 border-end    \",children:\"Friends\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-6 text-center p-2\",children:\"Teams\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"\\uD83D\\uDD0E Search your friend\",name:\"\",id:\"\"}),/*#__PURE__*/_jsx(\"div\",{className:\"row p-2      \",children:/*#__PURE__*/_jsx(\"table\",{className:\"bg-white rounded-2\",children:/*#__PURE__*/_jsxs(\"tbody\",{children:[list&&list.map((value,index)=>{var _value$request,_value$user_id2;return/*#__PURE__*/_jsx(\"tr\",{className:\"\",children:value.status==1&&/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex px-2 row-sm\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-2\",children:/*#__PURE__*/_jsxs(\"td\",{className:\"p-1\",style:{width:40},children:[\" \",/*#__PURE__*/_jsx(\"img\",{src:require(\"../../assets/1711859084821_kz1JoJrA8g7c.jpg\"),style:{width:35},alt:\"pi pi-user\",className:\"rounded-circle border border-1 border-secondary  \"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-7\",children:/*#__PURE__*/_jsx(\"td\",{className:\" p-1 align-items-center d-flex \",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn border-0\",children:/*#__PURE__*/_jsx(\"span\",{className:\"fw-medium\",onClick:()=>{var _value$user_id;return handelchat(value.request._id||((_value$user_id=value.user_id)===null||_value$user_id===void 0?void 0:_value$user_id._id));},children:((_value$request=value.request)===null||_value$request===void 0?void 0:_value$request.userName)||((_value$user_id2=value.user_id)===null||_value$user_id2===void 0?void 0:_value$user_id2.userName)})})})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-3 d-flex justify-content-center \",children:/*#__PURE__*/_jsx(\"td\",{className:\"text-end d-flex align-items-center\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary btn-sm fw-semibold border-0\",style:{fontSize:12,background:\"#FF0833\"},onClick:()=>hnadleCancel(value.request),children:\"UnFreind\"})})})]})},index);}),!list&&/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"3\",className:\"text-center\",children:\"Loading friends...\"})})]})})})]}),chat&&/*#__PURE__*/_jsx(ChatBox,{friendId:chat})]})})});};export default FriendList;","map":{"version":3,"names":["axios","useEffect","useState","toast","ChatBox","Link","Navigate","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","FriendList","list","setList","chat","setchat","token","localStorage","getItem","setFriends","defaults","headers","common","res","get","data","friends","friend","err","error","hnadleCancel","user_id","delete","response","message","handelchat","friendId","children","className","style","height","type","placeholder","name","id","map","value","index","_value$request","_value$user_id2","status","width","src","require","alt","onClick","_value$user_id","request","_id","userName","fontSize","background","colSpan"],"sources":["/Volumes/Udata/GitHub/Playpal/frontend /src/Pages/user/friendlist.jsx"],"sourcesContent":["import axios from \"axios\";\nimport { useEffect, useState } from \"react\"\nimport toast from \"react-hot-toast\"\nimport ChatBox from \"./chatbox\";\nimport { Link, Navigate } from \"react-router-dom\";\n\nconst FriendList = () => {\n    const [list, setList] = useState([])\n    const [chat, setchat] = useState(false)\n    const token = localStorage.getItem('token')\n\n    useEffect(() => {\n        setFriends();\n    }, [])\n\n    const setFriends = async () => {\n        try {\n            axios.defaults.headers.common[\"Authorization\"] = token;\n            const res = await axios.get(\"http://127.0.0.1:5050/user/yourFriends\");\n            setList([...res.data.friends, ...res.data.friend]);\n        } catch (err) {\n            toast.error(\"error in yourFriends\", err)\n        }\n    }\n\n    const hnadleCancel = async (user_id) => {\n        try {\n            const res = await axios.delete(\"http://127.0.0.1:5050/user/deleteRequest\", {\n                data: { user_id }\n            })\n        } catch (err) {\n            toast.error(err.response.data.message);\n        }\n    }\n\n    const handelchat = (friendId) => {\n        setchat(friendId)\n    }\n    return (\n        <>\n            <div className=\"container-fluid\" >\n                <div className=\"d-flex justify-content-center px-2 gap-2 \" style={{ height: 500 }}>\n                    <div className=\"col-4 p-3 py-1 border rounded-2 border-warning\">\n                        <div className=\"row-sm d-flex py-1\">\n                            <div className=\"col-6 text-center p-2 border-end    \">Friends</div>\n                            <div className=\"col-6 text-center p-2\">Teams</div>\n                        </div>\n                        <input type=\"text\" className=\"form-control\" placeholder=\"ðŸ”Ž Search your friend\" name=\"\" id=\"\" />\n                        <div className=\"row p-2      \">\n                            <table className=\"bg-white rounded-2\">\n                                <tbody  >\n                                    {list && list.map((value, index) => (\n                                        <tr key={index} className=\"\" >\n                                            {value.status == 1 && (\n                                                <div className=\"d-flex px-2 row-sm\">\n                                                    <div className=\"col-2\">\n                                                        <td className=\"p-1\" style={{ width: 40 }}>\n                                                            {\" \"}\n                                                            <img\n                                                                src={require(\"../../assets/1711859084821_kz1JoJrA8g7c.jpg\")}\n                                                                style={{ width: 35 }}\n                                                                alt=\"pi pi-user\"\n                                                                className=\"rounded-circle border border-1 border-secondary  \"\n\n                                                            />\n                                                        </td>\n                                                    </div>\n                                                    <div className=\"col-7\">\n                                                        <td className=\" p-1 align-items-center d-flex \" >\n                                                            <button className=\"btn border-0\">\n                                                                <span className=\"fw-medium\" onClick={() => handelchat(value.request._id || value.user_id?._id)}>{value.request?.userName || value.user_id?.userName}</span>\n                                                            </button>\n\n                                                        </td>\n                                                    </div>\n                                                    <div className=\"col-3 d-flex justify-content-center \">\n                                                        <td className=\"text-end d-flex align-items-center\">\n                                                            <button className=\"btn btn-primary btn-sm fw-semibold border-0\" style={{ fontSize: 12, background: \"#FF0833\" }} onClick={() => hnadleCancel(value.request)} >UnFreind</button>\n                                                        </td>\n                                                    </div>\n\n\n                                                </div>\n                                            )\n\n                                            }\n\n                                        </tr>\n                                    ))}\n                                    {!list && (\n                                        <tr>\n                                            <td colSpan=\"3\" className=\"text-center\">\n                                                Loading friends...\n                                            </td>\n                                        </tr>\n                                    )}\n                                </tbody>\n                            </table>\n                        </div>\n\n\n                    </div>\n                    {chat && <ChatBox friendId={chat} />}\n                </div>\n            </div>\n\n\n\n        </>\n    )\n}\n\nexport default FriendList"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}